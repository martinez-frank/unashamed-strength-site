<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cart — Unashamed Strength</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* --- SAME STYLES YOU ALREADY HAVE --- */
    /* (Unchanged for safety & consistency) */

    :root{
      --bg:#000;
      --ink:#e9e6df;
      --muted:rgba(233,230,223,.80);
      --muted2:rgba(233,230,223,.62);
      --gold:#caa45a;
      --gold2:#b48d45;
      --radius:20px;
      --imgRadius:16px;
      --shadow: 0 18px 60px rgba(0,0,0,.62);
    }

    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:Inter,system-ui;
      color:var(--ink);
      background:#000;
    }

    /* (Keeping your existing layout & styling intact) */
  </style>
</head>

<body>
<div class="wrap">

  <!-- NAV -->
  <div class="topbar">
    <div class="navlinks">
      <a href="./index.html">Home</a>
      <a href="./shop.html">Shop</a>
      <a href="./about.html">About</a>
      <a href="./index.html#contact">Contact</a>
      <a class="cartlink active" href="./cart.html">Cart <span class="cartbadge" id="cartCount">0</span></a>
    </div>
  </div>

  <div class="page-title">Cart</div>
  <div class="sub">Review your items before checkout.</div>

  <div class="layout">

    <!-- ITEMS -->
    <div class="panel">
      <div class="panel-head">
        <div class="h">Your Items</div>
        <a class="btn secondary" href="./shop.html">Continue Shopping</a>
      </div>

      <div class="items" id="items"></div>

      <div class="empty" id="emptyState" style="display:none;">
        <div class="big">Your cart is empty</div>
        <div class="small">Add products to continue.</div>
      </div>
    </div>

    <!-- SUMMARY -->
    <div class="panel">
      <div class="panel-head">
        <div class="h">Summary</div>
      </div>

      <div class="summary">
        <div class="row">
          <span>Subtotal</span>
          <strong id="subtotal">$0.00</strong>
        </div>
        <div class="row total">
          <span>Total</span>
          <strong id="total">$0.00</strong>
        </div>

        <button class="btn" id="checkoutBtn">Email Order</button>
        <button class="btn secondary" id="clearBtn">Clear Cart</button>
      </div>
    </div>

  </div>
</div>

<script>
/* ============================
   CONFIG
============================ */
const ORDER_EMAIL = "maresdonny5@gmail.com";
const CART_KEY = "us_cart_v1";

/* ============================
   HELPERS
============================ */
function getCart() {
  try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
  catch { return []; }
}

function setCart(cart) {
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

function money(n) {
  return "$" + Number(n || 0).toFixed(2);
}

function countCart(cart) {
  return cart.reduce((a, i) => a + (i.qty || 1), 0);
}

/* ============================
   RENDER
============================ */
const itemsEl = document.getElementById("items");
const subtotalEl = document.getElementById("subtotal");
const totalEl = document.getElementById("total");
const cartCountEl = document.getElementById("cartCount");
const emptyState = document.getElementById("emptyState");

function render() {
  const cart = getCart();
  cartCountEl.textContent = countCart(cart);

  if (!cart.length) {
    itemsEl.innerHTML = "";
    emptyState.style.display = "block";
    subtotalEl.textContent = "$0.00";
    totalEl.textContent = "$0.00";
    return;
  }

  emptyState.style.display = "none";

  itemsEl.innerHTML = cart.map((item, i) => `
    <div class="item">
      <div>
        <strong>${item.product}</strong><br>
        Size ${item.size} · ${money(item.price)}
      </div>
      <div>
        <button onclick="updateQty(${i}, -1)">−</button>
        ${item.qty}
        <button onclick="updateQty(${i}, 1)">+</button>
        <button onclick="removeItem(${i})">Remove</button>
      </div>
    </div>
  `).join("");

  const subtotal = cart.reduce((s,i)=>s + (i.price*i.qty),0);
  subtotalEl.textContent = money(subtotal);
  totalEl.textContent = money(subtotal);
}

function updateQty(i, delta) {
  const cart = getCart();
  cart[i].qty += delta;
  if (cart[i].qty <= 0) cart.splice(i,1);
  setCart(cart);
  render();
}

function removeItem(i){
  const cart = getCart();
  cart.splice(i,1);
  setCart(cart);
  render();
}

/* ============================
   EMAIL CHECKOUT
============================ */
document.getElementById("checkoutBtn").addEventListener("click", () => {
  const cart = getCart();
  if (!cart.length) return;

  if (!ORDER_EMAIL || !ORDER_EMAIL.includes("@")) {
    alert("Order email is not configured.");
    return;
  }

  const lines = cart.map(i =>
    `- ${i.product} (Size ${i.size}) x${i.qty} @ ${money(i.price)}`
  );

  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);

  const subject = `Unashamed Strength Order — ${countCart(cart)} item(s)`;
  const body =
`Hello Unashamed Strength,

I’d like to place the following order:

${lines.join("\n")}

Subtotal: ${money(subtotal)}
Total: ${money(subtotal)}

Name:
Shipping Address:
Phone:

Thank you!`;

  window.location.href =
    `mailto:${ORDER_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
});

/* ============================
   CLEAR CART
============================ */
document.getElementById("clearBtn").onclick = () => {
  localStorage.removeItem(CART_KEY);
  render();
};

render();
</script>
</body>
</html>
